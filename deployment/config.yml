external:
    omdb:
        # will contact omdb
        enabled: true
        # will contact amazon
        downloadPostersAmazon: true

reverseProxy:
    create: true
    network: rp

tls: false
routing: local

networks:
    subnet:
        # /120 prefix
        v6: "fd4d:6169:6c63:6f99:aaaa:aaaa:aaaa:aa"
        # /24 prefix
        legacy: "172.72.11"

additionalAllowedApps:
    - id: filez-react-components
      allowedOrigins: [http://localhost:5173]
      primaryOrigin: http://localhost:5173

filez:
    runAsRoot: true
    storage:
        default:
            # volume or bind mount
            type: volume
            path: ""
            defaultUserLimits:
                maxStorage: 10000000000 # 10GB
                maxFiles: 100000
                maxBandwidth: 0
    defaultStorage: default
    server:
        build:
            enabled: true
            path: ../../server/
            dockerfile: Dockerfile
        publicHostname:
            domain: vindelicum.eu
            subdomain: filez-server
        db:
            exposeToLocalhost: true
            port: 27018
    web:
        build:
            enabled: true
            path: ../../web/
            dockerfile: Dockerfile
        publicHostname:
            domain: vindelicum.eu
            subdomain: filez
    # THIS IS NOT IMPLEMENTED
    # this will chmod all files and folders and give any user read access to them on each path
    # this isn't optimal because it does something outside the container space but is required when running the containers as non root users
    readonlyMounts:
        - name: example-files
          path: /home/paul/Documents/filez/example-files
          ownerId: IZLia0BauiwG5pXLAbzQGHAezqkHUKnx

    # TODO if the number of addons is greater than 10 the network assignment will fail
    addons:
        - name: video
          db: true
          storage: true
          filezAccess: true
          image: firstdorsal/filez-addons-video
          resetOnRestart: true
          storageOptions:
              type: bind
              path: ./videoBind
          build:
              enabled: true
              path: ../../addons/video/
              dockerfile: Dockerfile
        - name: image
          db: true
          storage: true
          filezAccess: true
          image: firstdorsal/filez-addons-image
          resetOnRestart: true
          storageOptions:
              type: volume
              path:
          build:
              enabled: true
              path: ../../addons/image/
              dockerfile: Dockerfile
        - name: metadata
          db: true
          storage: false
          filezAccess: true
          image: firstdorsal/filez-addons-metadata
          resetOnRestart: true
          storageOptions:
              type: volume
              path:
          build:
              enabled: true
              path: ../../addons/metadata/
              dockerfile: Dockerfile

interossea:
    server:
        allowNewUsers: false
        createUsers: [test@vindelicum.eu, peter@vindelicum.eu]
        makeUsersAdmin: [test@vindelicum.eu]
        create: true
        internalHostname: interossea-server
        publicHostname:
            domain: vindelicum.eu
            subdomain: accounts-server
        build:
            enabled: true
            path: /home/paul/Documents/interossea/server/
            dockerfile: Dockerfile
        mail:
            username: no-reply@vindelicum.eu
            smtpServer: mx.vindelicum.eu
            fromName: Interossea Login
            fromAddress: no-reply@vindelicum.eu
            userAgent: Sugar-Free-Mail-2023
            replyTo: mail@vindelicum.eu
        db:
            exposeToLocalhost: true
            port: 27019
    web:
        create: true
        publicHostname:
            domain: vindelicum.eu
            subdomain: accounts
        build:
            enabled: true
            path: /home/paul/Documents/interossea/web/
            dockerfile: Dockerfile
