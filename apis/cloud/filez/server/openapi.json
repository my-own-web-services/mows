{"openapi":"3.1.0","info":{"title":"server","description":"","license":{"name":""},"version":"0.0.1"},"paths":{"/api/auth/check":{"post":{"operationId":"check_resource_access","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckResourceAccessRequestBody"}}},"required":true},"responses":{"200":{"description":"Checks if the requested resources are available to this user","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponse_CheckResourceAccessResponseBody"}}}}}}},"/api/files/content/get/{file_id}":{"get":{"operationId":"get_file_content","parameters":[{"name":"file_id","in":"path","description":"The ID of the file to retrieve content for","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"d","in":"path","description":"download the file/set the content disposition header to attachment","required":true,"schema":{"type":["boolean","null"]}},{"name":"c","in":"path","description":"request setting the caching headers for max-age in seconds","required":true,"schema":{"type":["integer","null"],"format":"int64","minimum":0}}],"responses":{"200":{"description":"Gets a single files data/content from the server"},"404":{"description":"File not found"},"500":{"description":"Internal server error retrieving file content"}}}},"/api/files/create":{"post":{"operationId":"create_file","requestBody":{"content":{"application/octet-stream":{}}},"responses":{"200":{"description":"Created a file on the server","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponse_CreateFileResponseBody"}}}}}}},"/api/files/info/get":{"post":{"operationId":"get_files_metadata","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetFilesMetaRequestBody"}}},"required":true},"responses":{"200":{"description":"Gets the metadata for any number of files","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponse_GetFileMetaResBody"}}}}}}},"/api/users/apply":{"post":{"operationId":"apply_user","responses":{"200":{"description":"Applied own user","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponse_ApplyUserResponseBody"}}}}}}}},"components":{"schemas":{"ApiResponseStatus":{"type":"string","enum":["Success","Error"]},"ApiResponse_ApplyUserResponseBody":{"type":"object","required":["message","status"],"properties":{"data":{"type":"object","required":["user_id"],"properties":{"user_id":{"type":"string","format":"uuid"}}},"message":{"type":"string"},"status":{"$ref":"#/components/schemas/ApiResponseStatus"}}},"ApiResponse_CheckResourceAccessResponseBody":{"type":"object","required":["message","status"],"properties":{"data":{"type":"object","required":["auth_evaluations"],"properties":{"auth_evaluations":{"type":"array","items":{"$ref":"#/components/schemas/AuthEvaluation"}}}},"message":{"type":"string"},"status":{"$ref":"#/components/schemas/ApiResponseStatus"}}},"ApiResponse_CreateFileResponseBody":{"type":"object","required":["message","status"],"properties":{"data":{"type":"object","required":["file_id"],"properties":{"file_id":{"type":"string"}}},"message":{"type":"string"},"status":{"$ref":"#/components/schemas/ApiResponseStatus"}}},"ApiResponse_GetFileMetaResBody":{"type":"object","required":["message","status"],"properties":{"data":{"type":"object","required":["files_meta"],"properties":{"files_meta":{"type":"array","items":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/File"}]}}}},"message":{"type":"string"},"status":{"$ref":"#/components/schemas/ApiResponseStatus"}}},"ApplyUserResponseBody":{"type":"object","required":["user_id"],"properties":{"user_id":{"type":"string","format":"uuid"}}},"AuthEvaluation":{"type":"object","required":["resource_id","is_allowed","reason"],"properties":{"is_allowed":{"type":"boolean"},"reason":{"$ref":"#/components/schemas/AuthReason"},"resource_id":{"type":"string","format":"uuid"}}},"AuthReason":{"oneOf":[{"type":"string","enum":["Owned"]},{"type":"object","required":["AllowedByDirectUserPolicy"],"properties":{"AllowedByDirectUserPolicy":{"type":"object","required":["policy_id"],"properties":{"policy_id":{"type":"string","format":"uuid"}}}}},{"type":"object","required":["AllowedByDirectGroupPolicy"],"properties":{"AllowedByDirectGroupPolicy":{"type":"object","required":["policy_id","via_user_group_id"],"properties":{"policy_id":{"type":"string","format":"uuid"},"via_user_group_id":{"type":"string","format":"uuid"}}}}},{"type":"object","required":["AllowedByResourceGroupUserPolicy"],"properties":{"AllowedByResourceGroupUserPolicy":{"type":"object","required":["policy_id","on_resource_group_id"],"properties":{"on_resource_group_id":{"type":"string","format":"uuid"},"policy_id":{"type":"string","format":"uuid"}}}}},{"type":"object","required":["AllowedByResourceGroupUserGroupPolicy"],"properties":{"AllowedByResourceGroupUserGroupPolicy":{"type":"object","required":["policy_id","via_user_group_id","on_resource_group_id"],"properties":{"on_resource_group_id":{"type":"string","format":"uuid"},"policy_id":{"type":"string","format":"uuid"},"via_user_group_id":{"type":"string","format":"uuid"}}}}},{"type":"object","required":["DeniedByDirectUserPolicy"],"properties":{"DeniedByDirectUserPolicy":{"type":"object","required":["policy_id"],"properties":{"policy_id":{"type":"string","format":"uuid"}}}}},{"type":"object","required":["DeniedByDirectGroupPolicy"],"properties":{"DeniedByDirectGroupPolicy":{"type":"object","required":["policy_id","via_user_group_id"],"properties":{"policy_id":{"type":"string","format":"uuid"},"via_user_group_id":{"type":"string","format":"uuid"}}}}},{"type":"object","required":["DeniedByResourceGroupUserPolicy"],"properties":{"DeniedByResourceGroupUserPolicy":{"type":"object","required":["policy_id","on_resource_group_id"],"properties":{"on_resource_group_id":{"type":"string","format":"uuid"},"policy_id":{"type":"string","format":"uuid"}}}}},{"type":"object","required":["DeniedByResourceGroupUserGroupPolicy"],"properties":{"DeniedByResourceGroupUserGroupPolicy":{"type":"object","required":["policy_id","via_user_group_id","on_resource_group_id"],"properties":{"on_resource_group_id":{"type":"string","format":"uuid"},"policy_id":{"type":"string","format":"uuid"},"via_user_group_id":{"type":"string","format":"uuid"}}}}},{"type":"string","enum":["NoMatchingAllowPolicy"]},{"type":"string","enum":["ResourceNotFound"]}]},"CheckResourceAccessRequestBody":{"type":"object","required":["resource_ids","resource_type","action"],"properties":{"action":{"type":"string"},"requesting_app_id":{"type":["string","null"],"format":"uuid"},"requesting_app_trusted":{"type":["boolean","null"]},"resource_ids":{"type":"array","items":{"type":"string","format":"uuid"}},"resource_type":{"type":"string"}}},"CheckResourceAccessResponseBody":{"type":"object","required":["auth_evaluations"],"properties":{"auth_evaluations":{"type":"array","items":{"$ref":"#/components/schemas/AuthEvaluation"}}}},"CreateFileRequestBody":{"type":"object","required":["file_name"],"properties":{"file_name":{"type":"string"},"mime_type":{"type":["string","null"]},"time_created":{"type":["string","null"],"format":"date-time"},"time_modified":{"type":["string","null"],"format":"date-time"}}},"CreateFileResponseBody":{"type":"object","required":["file_id"],"properties":{"file_id":{"type":"string"}}},"File":{"type":"object","required":["id","owner_id","mime_type","file_name","created_time","modified_time"],"properties":{"created_time":{"type":"string","format":"date-time"},"file_name":{"type":"string"},"id":{"type":"string","format":"uuid"},"mime_type":{"type":"string"},"modified_time":{"type":"string","format":"date-time"},"owner_id":{"type":"string","format":"uuid"}}},"GetFileMetaResBody":{"type":"object","required":["files_meta"],"properties":{"files_meta":{"type":"array","items":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/File"}]}}}},"GetFilesMetaRequestBody":{"type":"object","required":["file_ids"],"properties":{"file_ids":{"type":"array","items":{"type":"string","format":"uuid"}}}}}},"tags":[{"name":"filez-server","description":"MOWS Filez API"}]}