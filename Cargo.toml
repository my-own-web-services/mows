[workspace]
resolver = "2"

members = [
    "utils/*",
    "operators/*",
    "manager",
    "apis/core/pektin/*",
    "apis/cloud/filezz/server",
]
exclude = [
    ".cargo-home",
    "./apis/core/pektin/charts/",
    "./apis/core/pektin/docs/",
    "./apis/core/pektin/ribston/",
]


[workspace.package]
version = "0.1.0"
edition = "2021"

[workspace.package.lints.rust]
unsafe_code = "forbid"

[workspace.package.lints.clippy]
enum_glob_use = "deny"
cast_sign_loss = "deny"
cast_possible_truncation = "deny"
cast_possible_wrap = "deny"
cast_lossless = "deny"
indexing_slicing = "deny"

[workspace.package.profile.release]
codegen-units = 1
debug = false
debug-assertions = false
lto = true
opt-level = 3
rpath = false


[workspace.dependencies]
mows-common = { path = "./utils/mows-common" }
pektin-common = { path = "./apis/core/pektin/common" }
zitadel = { path = "./utils/zitadel-rust" }
mows-package-manager = { path = "./operators/mows-package-manager" }
acme-rs = { path = "./apis/core/pektin/acme-rs" }


utoipa-swagger-ui = { version = "9.0.1", features = ["vendored", "axum"] }
utoipa = { version = "5.2.0", features = [
    "axum_extras",
    "macros",
    "openapi_extensions",
    "debug",
] }
utoipa-axum = { version = "0.2.0", features = ["debug"] }

axum = { version = "0.8.4", features = ["ws", "tokio"] }
axum-extra = { version = "0.10.1", features = ["typed-header"] }
tower = { version = "0.5.2", features = ["util", "timeout"] }
tower-http = { version = "0.6.4", features = [
    "fs",
    "cors",
    "add-extension",
    "trace",
] }
tokio = { version = "1.45.0", default-features = false, features = [
    "full",
    "tracing",
] }
thiserror = "2.0.12"
anyhow = "1.0.98"
tracing = "0.1.40"
serde = { version = "1.0.219", features = [
    "derive",
    "std",
], default-features = false }
serde_json = { version = "1.0.132" }
mime_guess = "2.0.5"
url = { version = "2.5.4", features = ["serde"] }
