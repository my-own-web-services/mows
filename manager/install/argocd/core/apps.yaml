apiVersion: argoproj.io/v1alpha1
kind: AppProject
metadata:
    name: mows-core
spec:
    sourceRepos:
        - https://github.com/my-own-web-services/mows
    clusterResourceWhitelist:
        - group: "*"
          kind: "*"
    destinations:
        - namespace: "*"
          server: "*"

---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
    name: mows-network
    annotations:
        argocd.argoproj.io/sync-wave: "1"
spec:
    source:
        path: manager/install/core/network/cilium
    destination:
        namespace: mows-network
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
    name: mows-storage
    annotations:
        argocd.argoproj.io/sync-wave: "1"
spec:
    source:
        path: manager/install/core/storage/longhorn
    destination:
        namespace: mows-storage
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
    name: mows-argocd
    annotations:
        argocd.argoproj.io/sync-wave: "1"
spec:
    source:
        path: manager/install/core/argocd
    destination:
        namespace: mows-argocd
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
    name: mows-db-postgres
    annotations:
        argocd.argoproj.io/sync-wave: "2"
spec:
    source:
        path: manager/install/core/db/postgres
    destination:
        namespace: mows-db-postgres
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
    name: mows-vault
    annotations:
        argocd.argoproj.io/sync-wave: "2"
spec:
    source:
        path: manager/install/core/secrets/vault
    destination:
        namespace: mows-vault
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
    name: mows-eso
    annotations:
        argocd.argoproj.io/sync-wave: "2"
spec:
    source:
        path: manager/install/core/secrets/eso
    destination:
        namespace: mows-eso
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
    name: mows-gitea
    annotations:
        argocd.argoproj.io/sync-wave: "3"
spec:
    source:
        path: manager/install/core/gitea
    destination:
        namespace: mows-gitea
