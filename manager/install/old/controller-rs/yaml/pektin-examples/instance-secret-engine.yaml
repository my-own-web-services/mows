apiVersion: vault.k8s.mows.cloud/v1
kind: VaultResource
metadata:
    name: pektin-transit # can be anything
    namespace: default
spec:
    SecretEngine:
        engineType: transit
        engineId: dns-signing
# should create a secret engine of type transit at the path mows-core-secrets-vrc/pektin/dns-signing

---
apiVersion: vault.k8s.mows.cloud/v1
kind: VaultResource
metadata:
    name: pektin-kubernetes # can be anything
    namespace: default
spec:
    AuthEngine:
        engineId: pektin-kubernetes
        engine:
            kubernetes:
                roles:
                    pektin-api:
                        serviceAccountName: pektin-api
                        policyIds: ["pektin-api-policy"]
---
apiVersion: vault.k8s.mows.cloud/v1
kind: VaultResource
metadata:
    name: pektin-api-policy # can be anything
    namespace: default
spec:
    EngineAccessPolicy:
        policyId: pektin-api-policy
        subPolicies:
            - engineId: dns-signing
              engineType: secret
              subPath: "*"
              capabilities: ["update", "read"]
