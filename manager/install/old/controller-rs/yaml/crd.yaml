apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: vaultresources.vault.k8s.mows.cloud
spec:
  group: vault.k8s.mows.cloud
  names:
    categories: []
    kind: VaultResource
    plural: vaultresources
    shortNames:
    - vres
    singular: vaultresource
  scope: Namespaced
  versions:
  - additionalPrinterColumns: []
    name: v1
    schema:
      openAPIV3Schema:
        description: Auto-generated derived type for VaultResourceSpec via `CustomResource`
        properties:
          spec:
            description: |-
              Generate the Kubernetes wrapper struct `Document` from our Spec and Status struct

              This provides a hook for generating the CRD yaml (in crdgen.rs) vault.k8s.mows.cloud
            oneOf:
            - required:
              - SecretEngine
            - required:
              - AuthEngine
            - required:
              - EngineAccessPolicy
            - required:
              - K8sAuthRole
            - required:
              - KvSecretEngineValue
            properties:
              AuthEngine:
                properties:
                  engineName:
                    type: string
                  engineType:
                    enum:
                    - kubernetes
                    type: string
                required:
                - engineName
                - engineType
                type: object
              EngineAccessPolicy:
                properties:
                  capabilities:
                    items:
                      enum:
                      - read
                      - create
                      - update
                      - delete
                      - list
                      type: string
                    type: array
                  engineName:
                    type: string
                  policyId:
                    type: string
                  subPath:
                    type: string
                required:
                - capabilities
                - engineName
                - policyId
                - subPath
                type: object
              K8sAuthRole:
                properties:
                  attachedPolicyId:
                    description: The vault policy id to attach to the service account without namespace
                    type: string
                  boundServiceAccountNamespaces:
                    items:
                      type: string
                    type: array
                  serviceAccountName:
                    type: string
                required:
                - attachedPolicyId
                - boundServiceAccountNamespaces
                - serviceAccountName
                type: object
              KvSecretEngineValue:
                properties:
                  engineName:
                    type: string
                  key:
                    type: string
                  value:
                    type: string
                required:
                - engineName
                - key
                - value
                type: object
              SecretEngine:
                properties:
                  engineName:
                    type: string
                  engineType:
                    enum:
                    - kv-v2
                    - transit
                    type: string
                required:
                - engineName
                - engineType
                type: object
            type: object
          status:
            description: The status object of `Document`
            nullable: true
            properties:
              created:
                type: boolean
            required:
            - created
            type: object
        required:
        - spec
        title: VaultResource
        type: object
    served: true
    storage: true
    subresources:
      status: {}
